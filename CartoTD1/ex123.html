<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
  <!-- <meta charset="utf-8" http-equiv="refresh" content="1" > -->
  <title>TP1 Carto</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="./tp1.js"></script>
</head>
<body>
  <section id="ex2">
    <u><h3>Exo 2 : Position de l'appareil (activez la position pour afficher les informations)</h3></u>
    <div class="function1">
      <h3>fonction getCurrentPosition()</h3>
      <ul>
      </ul>
    </div>
    <div class="function2">
      <h3>fonction watchPosition()</h3>
      <ul>
      </ul>
    </div>
  </section>
  <br />
  <section id="ex3">
    <u><h3>Exo 3 : Orientation de l'appareil : </h3></u>
    <div class="function1">
      <h3>Orientation</h3>
      <ul>
      </ul>
    </div>
    <div class="function2">
      <h3>Accélération</h3>
      <ul>
      </ul>
    </div>
  </section>

  <section id="exercice4">
    <h1>Touch events :</h1>
    <div>
      <ul>
      </ul>
    </div>
  </section>

  <br />
</body>
</html>

<script>
let ex2 ;
let ex3 ;

$(document).ready(function() {

  ex2 = $('#ex2') ;
  ex3 = $('#ex3') ;


  navigator.geolocation.getCurrentPosition(function(position) {
    var firstDiv = ex2.find('.function1') ;
    firstDiv.find('ul').append(
      "<li>Longitude : " + Math.round(position.coords.longitude) + "</li>",
      "<li>Latitude : " + Math.round(position.coords.latitude) + "</li>",
      "<li>Precision : " + Math.round(position.coords.accuracy) + "</li>",
      "<li>Vitesse : " + Math.round(position.coords.speed) + "</li>",
      "<li>Timestamp : " + new Date(position.timestamp) + "</li>"
    ) ;
  });

  navigator.geolocation.watchPosition(function(position) {
    var secondDiv = ex2.find('.function2') ;
    secondDiv.find('ul').empty() ;
    secondDiv.find('ul').append(
      '<li>Longitude : ' + Math.round(position.coords.longitude) + '</li>',
      "<li>Latitude : " + Math.round(position.coords.latitude) + "</li>",
      "<li>Precision : " + Math.round(position.coords.accuracy) + "</li>",
      "<li>Vitesse : " + Math.round(position.coords.speed) + "</li>",
      "<li>Timestamp : " + new Date(position.timestamp) + "</li>"
    ) ;
  });

  if(window.DeviceOrientationEvent) {
    window.addEventListener('deviceorientation', function(orientation) {
      var firstDiv = ex3.find('.function1') ;
      firstDiv.find('ul').empty() ;
      firstDiv.find('ul').append(
        "<li>X : " + Math.round(orientation.alpha) + "</li>",
        "<li>Y : " + Math.round(orientation.beta) + "</li>",
        "<li>Z : " + Math.round(orientation.gamma) + "</li>"
      ) ;
    });
  }

  if(window.DeviceMotionEvent) {
    window.addEventListener('devicemotion', function(orientation) {
      var secondDiv = ex3.find('.function2') ;
      secondDiv.find('ul').empty() ;
      secondDiv.find('ul').append(
        "<li>Acceleration X : " + Math.round(orientation.acceleration.x) + "</li>",
        "<li>Acceleration Y : " + Math.round(orientation.acceleration.y) + "</li>",
        "<li>Acceleration Z : " + Math.round(orientation.acceleration.z) + "</li>",
        "<li>Rotation X : " + Math.round(orientation.rotationRate.alpha) + "</li>",
        "<li>Rotation Y : " + Math.round(orientation.rotationRate.beta) + "</li>",
        "<li>Rotation Z : " + Math.round(orientation.rotationRate.gamma) + "</li>"
      ) ;
    });
  }
}) ;
</script>