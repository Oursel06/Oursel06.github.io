<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
  <!-- <meta charset="utf-8" http-equiv="refresh" content="1" > -->
  <title>TP1 Carto</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="./tp1.js"></script>
</head>
<body>
  <section id="ex2">
    <u><h4>Exo 2 : Position de l'appareil (activez la position pour afficher les informations)</h4></u>
    <div class="function1">
      <h4>fonction getCurrentPosition()</h4>
      <ul>
      </ul>
    </div>
    <div class="function2">
      <h4>fonction watchPosition()</h4>
      <ul>
      </ul>
    </div>
  </section>
  <br />
  <section id="ex3">
    <u><h4>Exo 3 : Orientation de l'appareil : </h4></u>
    <div class="function1">
      <h4>Orientation</h4>
      <ul>
      </ul>
    </div>
    <div class="function2">
      <h4>Accélération</h4>
      <ul>
      </ul>
    </div>
  </section>
  <br />
</body>
</html>

<script>
let ex2 ;
let ex3 ;

$(document).ready(function() {

  ex2 = $('#ex2') ;
  ex3 = $('#ex3') ;


  navigator.geolocation.getCurrentPosition(function(position) {
    var firstDiv = ex2.find('.function1') ;
    firstDiv.find('ul').append(
      "<li>Longitude : " + position.coords.longitude.toFixed(2) + "</li>",
      "<li>Latitude : " + position.coords.latitude.toFixed(2) + "</li>",
      "<li>Precision : " + position.coords.accuracy.toFixed(2) + "</li>",
      "<li>Vitesse : " + position.coords.speed.toFixed(2) + "</li>",
      "<li>Timestamp : " + position.timestamp.toFixed(2) + "</li>"
    ) ;
  });

  navigator.geolocation.watchPosition(function(position) {
    var secondDiv = ex2.find('.function2') ;
    secondDiv.find('ul').empty() ;
    secondDiv.find('ul').append(
      '<li>Longitude : ' + position.coords.longitude.toFixed(2) + '</li>',
      "<li>Latitude : " + position.coords.latitude.toFixed(2) + "</li>",
      "<li>Precision : " + position.coords.accuracy.toFixed(2) + "</li>",
      "<li>Vitesse : " + position.coords.speed.toFixed(2) + "</li>",
      "<li>Timestamp : " + position.timestamp.toFixed(2) + "</li>"
    ) ;
  });

  if(window.DeviceOrientationEvent) {
    window.addEventListener('deviceorientation', function(orientation) {
      var firstDiv = ex3.find('.function1') ;
      firstDiv.find('ul').empty() ;
      firstDiv.find('ul').append(
        "<li>X : " + orientation.alpha.toFixed(2) + "</li>",
        "<li>Y : " + orientation.beta.toFixed(2) + "</li>",
        "<li>Z : " + orientation.gamma.toFixed(2) + "</li>"
      ) ;
    });
  }

  if(window.DeviceMotionEvent) {
    window.addEventListener('devicemotion', function(orientation) {
      var secondDiv = ex3.find('.function2') ;
      secondDiv.find('ul').empty() ;
      secondDiv.find('ul').append(
        "<li>Acceleration X : " + orientation.acceleration.x.toFixed(2) + "</li>",
        "<li>Acceleration Y : " + orientation.acceleration.y.toFixed(2) + "</li>",
        "<li>Acceleration Z : " + orientation.acceleration.z.toFixed(2) + "</li>",
        "<li>Rotation X : " + orientation.rotationRate.alpha.toFixed(2) + "</li>",
        "<li>Rotation Y : " + orientation.rotationRate.beta.toFixed(2) + "</li>",
        "<li>Rotation Z : " + orientation.rotationRate.gamma.toFixed(2) + "</li>"
      ) ;
    });
  }
}) ;
</script>